<Window x:Class="Lottery.View.Game.GameSummaryView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:language="clr-namespace:Lottery.Properties.Langs"
        Title="Resumen de Partida"
        WindowStartupLocation="CenterScreen"
        WindowState="Maximized"
        AllowsTransparency="True"
        WindowStyle="None">

    <Window.Background>
        <ImageBrush ImageSource="/Images/backgroundRickAndMorty.png" Stretch="UniformToFill"/>
    </Window.Background>

    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVis"/>
        <Style TargetType="TextBlock" BasedOn="{StaticResource {x:Type TextBlock}}">
            <Setter Property="Foreground" Value="{StaticResource TextBrush}"/>
        </Style>
    </Window.Resources>

    <Grid>
        <Viewbox Stretch="Uniform">
            <Border Background="{StaticResource OverlayBackgroundBrush}"
                    CornerRadius="12"
                    Padding="30"
                    Width="850"
                    VerticalAlignment="Center">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <StackPanel Grid.Row="0" Margin="0,0,0,20">
                        <TextBlock Text="🏁" FontSize="60" HorizontalAlignment="Center"/>
                        <TextBlock Text="{Binding SummaryMessage}"
                                   FontSize="32"
                                   FontWeight="Bold"
                                   TextWrapping="Wrap"
                                   TextAlignment="Center"
                                   HorizontalAlignment="Center"/>
                    </StackPanel>

                    <Border Grid.Row="1"
                        Height="400"
                        Width="400"
                        BorderThickness="2"
                        BorderBrush="{StaticResource TextBrush}"
                        CornerRadius="8"
                        Background="#33FFFFFF"
                        Visibility="{Binding HasWinner, Converter={StaticResource BoolToVis}}">
                        <Viewbox Stretch="Uniform">
                            <ItemsControl ItemsSource="{Binding WinnerBoard}">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <UniformGrid Rows="4" Columns="4"/>
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Grid Margin="2">
                                            <Image Source="{Binding ImageSource}" Stretch="UniformToFill"/>
                                        </Grid>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </Viewbox>
                    </Border>

                    <StackPanel Grid.Row="2" Margin="0,30,0,0">
                        <TextBlock Text="{x:Static language:Lang.BackToLobbyMessage}"
                            HorizontalAlignment="Center" 
                            FontSize="16" Opacity="0.7"/>

                        <TextBlock Text="{Binding TimerText}"
                            FontSize="40"
                            FontWeight="ExtraBold"
                            HorizontalAlignment="Center"/>

                        <Button Content="{x:Static language:Lang.GameSummaryLeaveNowButton}"
                            Command="{Binding ExitNowCommand}"
                            Width="150"
                            Height="40"
                            Margin="0,15,0,0"
                            FontSize="18"
                            FontWeight="Bold"
                            Cursor="Hand"
                            Background="#FFD13438" 
                            Foreground="White"
                            BorderThickness="0">
                            <Button.Resources>
                                <Style TargetType="Border">
                                    <Setter Property="CornerRadius" Value="8"/>
                                </Style>
                            </Button.Resources>
                        </Button>
                        
                    </StackPanel>
                </Grid>
            </Border>
        </Viewbox>
    </Grid>
</Window>